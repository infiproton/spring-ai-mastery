<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text Chat</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
    >
</head>
<body class="bg-light">

<div class="container mt-4" style="max-width: 800px;">
    <h3 class="mb-3">Text Chat</h3>

    <div class="mb-3">
        <textarea
                id="prompt"
                class="form-control"
                rows="4"
                placeholder="Type your message here..."
        ></textarea>
    </div>

    <button id="sendBtn" class="btn btn-primary">
        Send
    </button>

    <hr/>

    <h5>AI Response</h5>
    <pre id="response" class="bg-white p-3 border rounded"
         style="min-height: 200px;"></pre>
</div>

<script>
    const sendBtn = document.getElementById("sendBtn");
    const promptInput = document.getElementById("prompt");
    const responseBox = document.getElementById("response");

    sendBtn.addEventListener("click", async () => {
        const prompt = promptInput.value.trim();
        if (!prompt) {
            return;
        }

        responseBox.textContent = "Waiting for response...";

        try {
            const res = await fetch("/ai/chat", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    message: prompt
                })
            });

            if (!res.ok) {
                responseBox.textContent = "Error: " + res.status;
                return;
            }
            const text = await res.text();
            responseBox.textContent = text;
        } catch (err) {
            responseBox.textContent = "Request failed: " + err.message;
        }
    });
</script>

</body>
</html>
